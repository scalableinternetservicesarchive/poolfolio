<% provide(:title, @user.firstname + " " + @user.lastname) %>
<% @team = Team.find(@user.team_id) %>
<% @teams = Team.all() %>
<% @team_stocks = Stock.where(team_id: @user.team_id)%>

<div class="center bd-highlight mt-5 pl-3 pr-3">
  <div class="container-fluid center">
    <div class="row">
      <div class="col-2 center">
        <h6 class="font-weight-bold">
        <%= link_to @user.firstname + "'s Homepage" , edit_user_registration_path %>
        </h6>
        <p><%=
        if @team.name.blank?
          link_to "Click to Join a team.", teams_path
        else
          @team.name + "'s Hub"
        end
        %>
        </p>
      </div>

      <div class="col center ">
        <h6>
          <b>Portfolio Total Value: </b><%=
          if @team.value.blank?
            number_to_currency("0")
          else
            number_to_currency(@team.value)
          end
          %>
        </h6>
        <i>Cash Value:</i>
      </div>

      <div class="col-2 center">
        <%= button_to "Suggest", '#', class: "btn btn-lg btn-info "%>
      </div>
    </div>

    <div class="container" >
      <div class="row mt-2" style="height: 40em">
        <div class="col-2 user-hub m-2 border border-secondary rounded">
          <h5 class="font-weight-bold mt-1">Rankings</h5>
          <div class="d-flex flex-row justify-content-between">
              <div class="pt-1"><u>Team Name</u></div>
              <div class="pt-1"><u>Value</u></div>
          </div>

              <% @teams.each do |team|%>
                <div class="d-flex flex-row justify-content-between">
                  <div class=""><%= team.name %></div>
                  <div class=""><%= number_to_currency(team.value) %></div>
                </div>
              <% end %>

        </div>
        <div class="col mt-2 d-flex flex-column">
            <div class="p-2 bg-info " >Flex item 2</div>
            <div class="p-2 bg-primary align-items-baseline">Flex item 2</div>
        </div>
        <div class="col-3 bg-danger m-2 border border-secondary rounded">
          <h5 class="font-weight-bold mt-1">Stocks</h5>
          <% if @teams.blank? %>
            <div class="d-flex flex-row justify-content-between">
                <div class="pt-1"><u>No Team! <%= link_to "Join a team.", join_team_path %></u></div>
            </div>
          <% else %>
            <div class="d-flex flex-row justify-content-between">
                <div class="pt-1"><u>Ticker Symbol</u></div>
                <div class="pt-1"><u>Price</u></div>
            </div>

            <% @team_stocks.each do |team_stocks|%>
              <div class="d-flex flex-row justify-content-between">
                <div class=""><%= team_stocks.ticker %></div>
                <div class=""><%= number_to_currency(team_stocks.price) %></div>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <!-- <div class="d-flex bg-warning">
      <div class="p-2 bg-info">Flex item 1</div>
      <div class="p-2 flex-column">
        <div class="p-2 m-auto bg-primary">Flex item 1</div>
        <div class="p-2">Flex item 1</div>
      </div>
      <div class="p-2 ml-auto bg-danger">Flex item 3</div>
    </div> -->
  </div>
</div>
<%# <%= link_to "Edit your profile.", edit_user_registration_path %>
